{
  "scout_id": "SCOUT-UI-V3-REQUIREMENTS",
  "scanned_at": "2026-01-25T22:30:00Z",
  "source_file": ".taskmaster/docs/prd_orchestr8_v3_universal.txt",
  "report_version": "1.0",

  "ui_requirements": [
    {
      "requirement_id": "UI-1.1.1",
      "source_task": "Task 1.1 (Gatekeeper Refactor)",
      "description": "Lock All Protected button that calls warden.lock_file() for each protected path",
      "ui_component_type": "button",
      "marimo_component": "mo.ui.button",
      "priority": "high",
      "status": "not_started",
      "acceptance_test": "Click Lock All, verify files have 0o444 permissions"
    },
    {
      "requirement_id": "UI-1.1.2",
      "source_task": "Task 1.1 (Gatekeeper Refactor)",
      "description": "Unlock All button that calls warden.unlock_file() for each path",
      "ui_component_type": "button",
      "marimo_component": "mo.ui.button",
      "priority": "high",
      "status": "not_started",
      "acceptance_test": "Click Unlock All, verify files have 0o644 permissions"
    },
    {
      "requirement_id": "UI-1.1.3",
      "source_task": "Task 1.1 (Gatekeeper Refactor)",
      "description": "Per-file toggle using STATE_MANAGERS['selected'] to lock/unlock individual files",
      "ui_component_type": "checkbox/toggle",
      "marimo_component": "mo.ui.checkbox or mo.ui.switch",
      "priority": "high",
      "status": "not_started",
      "acceptance_test": "Select file in Explorer, toggle lock in Gatekeeper, verify permission change"
    },
    {
      "requirement_id": "UI-1.2.1",
      "source_task": "Task 1.2 (JSON Table Rendering)",
      "description": "detect_and_render_output() utility function for smart output rendering",
      "ui_component_type": "utility function",
      "marimo_component": "mo.ui.table, mo.ui.json, mo.ui.text_area",
      "priority": "medium",
      "status": "completed",
      "location": "IP/plugins/output_renderer.py",
      "acceptance_test": "JSON array renders as sortable table, text renders as text_area"
    },
    {
      "requirement_id": "UI-1.2.2",
      "source_task": "Task 1.2 (JSON Table Rendering)",
      "description": "JSON array rendering as mo.ui.table with sortable columns",
      "ui_component_type": "table",
      "marimo_component": "mo.ui.table",
      "priority": "medium",
      "status": "completed",
      "location": "IP/plugins/output_renderer.py:_render_json_array()"
    },
    {
      "requirement_id": "UI-1.2.3",
      "source_task": "Task 1.2 (JSON Table Rendering)",
      "description": "Pagination for large JSON arrays (>1000 rows)",
      "ui_component_type": "pagination",
      "marimo_component": "mo.ui.table with pagination=True",
      "priority": "medium",
      "status": "completed",
      "location": "IP/plugins/output_renderer.py (PAGINATION_THRESHOLD=1000)"
    },
    {
      "requirement_id": "UI-4.1.1",
      "source_task": "Task 4.1 (Universal Bridge)",
      "description": "Dynamic accordion sections, one per manifest in registry/",
      "ui_component_type": "accordion",
      "marimo_component": "mo.accordion",
      "priority": "high",
      "status": "not_started",
      "acceptance_test": "Each .json in registry/ generates an accordion section"
    },
    {
      "requirement_id": "UI-4.1.2",
      "source_task": "Task 4.1 (Universal Bridge)",
      "description": "Discovery mode: run discovery.command and generate buttons from JSON result",
      "ui_component_type": "dynamic buttons",
      "marimo_component": "mo.ui.button (dynamically generated)",
      "priority": "high",
      "status": "not_started"
    },
    {
      "requirement_id": "UI-4.1.3",
      "source_task": "Task 4.1 (Universal Bridge)",
      "description": "Static commands mode: generate buttons from manifest.static_commands array",
      "ui_component_type": "static buttons",
      "marimo_component": "mo.ui.button",
      "priority": "high",
      "status": "not_started"
    },
    {
      "requirement_id": "UI-4.1.4",
      "source_task": "Task 4.1 (Universal Bridge)",
      "description": "Command output rendering using detect_and_render_output()",
      "ui_component_type": "output display",
      "marimo_component": "mo.ui.table or mo.ui.text_area",
      "priority": "high",
      "status": "not_started",
      "dependency": "UI-1.2.1 (output_renderer.py)"
    },
    {
      "requirement_id": "UI-4.1.5",
      "source_task": "Task 4.1 (Universal Bridge)",
      "description": "Manifest validation with required fields (name, base_command)",
      "ui_component_type": "validation logic",
      "marimo_component": "None (backend validation)",
      "priority": "high",
      "status": "not_started"
    },
    {
      "requirement_id": "UI-4.1.6",
      "source_task": "Task 4.1 (Universal Bridge)",
      "description": "30-second subprocess timeout with error display",
      "ui_component_type": "error display",
      "marimo_component": "mo.md or mo.callout",
      "priority": "medium",
      "status": "not_started"
    },
    {
      "requirement_id": "UI-4.2.1",
      "source_task": "Task 4.2 (Retire CLI Bridge)",
      "description": "Remove or rename 05_cli_bridge.py to prevent duplicate tabs",
      "ui_component_type": "cleanup",
      "marimo_component": "None (file operation)",
      "priority": "low",
      "status": "not_started",
      "dependency": "UI-4.1.* (Universal Bridge must work first)"
    },
    {
      "requirement_id": "UI-6.1.1",
      "source_task": "Task 6.1 (E2E Test)",
      "description": "Verify Scaffold Parsers (TS) accordion appears in Universal Bridge",
      "ui_component_type": "test verification",
      "marimo_component": "mo.accordion",
      "priority": "high",
      "status": "not_started"
    },
    {
      "requirement_id": "UI-6.1.2",
      "source_task": "Task 6.1 (E2E Test)",
      "description": "Verify discovered plugins listed as buttons when accordion expanded",
      "ui_component_type": "test verification",
      "marimo_component": "mo.ui.button",
      "priority": "high",
      "status": "not_started"
    },
    {
      "requirement_id": "UI-6.1.3",
      "source_task": "Task 6.1 (E2E Test)",
      "description": "Verify output renders correctly (JSON as table or formatted)",
      "ui_component_type": "test verification",
      "marimo_component": "mo.ui.table",
      "priority": "high",
      "status": "not_started"
    },
    {
      "requirement_id": "UI-6.2.1",
      "source_task": "Task 6.2 (Multi-Manifest Test)",
      "description": "Verify multiple manifests render as separate accordions",
      "ui_component_type": "test verification",
      "marimo_component": "mo.accordion",
      "priority": "medium",
      "status": "not_started"
    },
    {
      "requirement_id": "UI-6.2.2",
      "source_task": "Task 6.2 (Multi-Manifest Test)",
      "description": "Verify UI updates dynamically when manifests added/removed",
      "ui_component_type": "test verification",
      "marimo_component": "Marimo reactivity",
      "priority": "medium",
      "status": "not_started"
    }
  ],

  "new_ui_components_needed": [
    {
      "component": "05_universal_bridge.py",
      "status": "not_started",
      "description": "New plugin to replace 05_cli_bridge.py",
      "dependencies": ["Registry infrastructure", "output_renderer.py"]
    },
    {
      "component": "Lock All / Unlock All buttons",
      "status": "not_started",
      "location": "03_gatekeeper.py",
      "dependencies": ["louis_core integration"]
    },
    {
      "component": "Per-file toggle",
      "status": "not_started",
      "location": "03_gatekeeper.py",
      "dependencies": ["STATE_MANAGERS['selected']"]
    }
  ],

  "acceptance_criteria_ui_specific": [
    {
      "criteria_id": "AC-2",
      "text": "Lock All / Unlock All buttons actually change file permissions",
      "test": "os.stat() returns 0o444 after lock, 0o644 after unlock"
    },
    {
      "criteria_id": "AC-3",
      "text": "Per-file toggle works with STATE_MANAGERS['selected']",
      "test": "Select file in Explorer, toggle in Gatekeeper, verify permission"
    },
    {
      "criteria_id": "AC-10",
      "text": "JSON output renders as table, text as text_area",
      "test": "Execute plugin returning JSON array, verify table renders with sortable columns"
    }
  ],

  "estimated_ui_effort": {
    "task_1_1_gatekeeper": "3 hours",
    "task_1_2_json_rendering": "COMPLETED (output_renderer.py exists)",
    "task_4_1_universal_bridge": "6 hours",
    "task_4_2_retire_cli_bridge": "0.5 hours",
    "task_6_1_e2e_test": "2 hours",
    "task_6_2_multi_manifest": "1 hour",
    "total_hours": "12.5 hours"
  },

  "summary": "The v3.0 PRD defines 18 UI requirements across 6 tasks. 3 requirements (output_renderer.py) are COMPLETED. 15 requirements are NOT_STARTED. Critical path: Gatekeeper integration (Task 1.1) and Universal Bridge (Task 4.1) are high-priority UI work. Estimated total UI effort: 12.5 hours."
}
