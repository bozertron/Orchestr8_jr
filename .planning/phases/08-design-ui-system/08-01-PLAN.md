---
phase: 08-design-ui-system
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - IP/plugins/07_settings.py
  - IP/styles/orchestr8.css
autonomous: true
user_setup: []

must_haves:
  truths:
    - "Settings UI uses exact Void Design color tokens (#1fbdea, #D4AF37, #9D4EDD)"
    - "Settings tabs switch without page reload"
    - "Settings save persists to pyproject_orchestr8_settings.toml"
    - "No breathing animations - emergence only"
    - "No ✕ dismiss buttons - uses ◇ diamond"
  artifacts:
    - path: "IP/plugins/07_settings.py"
      provides: "Settings UI with Void Design styling"
      min_lines: 100
    - path: "IP/styles/orchestr8.css"
      provides: "Void Design CSS tokens and emergence keyframes"
      contains: "--gold-metallic.*#D4AF37"
  key_links:
    - from: "07_settings.py"
      to: "orchestr8.css"
      via: "CSS class references"
      pattern: "class=.*settings"
---

<objective>
Apply Void Design System tokens to the Settings UI in 07_settings.py. Replace inline CSS with orchestr8.css class references, implement text-first minimal chrome, and fix deprecated button callbacks.

Purpose: Settings UI must match Void Design System per research recommendations. Current 07_settings.py has inline CSS with non-standard colors and uses deprecated patterns.
</objective>

<execution_context>
@/home/bozertron/.config/opencode/get-shit-done/workflows/execute-plan.md
@/home/bozertron/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@IP/plugins/07_settings.py - Current settings implementation with inline CSS
@IP/styles/orchestr8.css - Void Design CSS tokens and emergence keyframes
@.planning/phases/08-design-ui-system/08-RESEARCH.md - Research findings
@.planning/phases/08-design-ui-system/CONTEXT.md - Phase constraints
</context>

<tasks>

<task type="auto">
  <name>Add Void Design CSS classes to orchestr8.css</name>
  <files>IP/styles/orchestr8.css</files>
  <action>
    Add Void Design-compliant CSS classes for settings UI:

    1. Add settings-specific classes at the end of orchestr8.css:
       - `.settings-container` - Main container with bg-elevated
       - `.settings-header` - Header with border-subtle
       - `.settings-title` - Gold metallic title
       - `.settings-tabs` - Tab button row
       - `.settings-tab` - Tab button with hover/active states
       - `.settings-tab.active` - Active tab with gold border
       - `.settings-section` - Section card with subtle border
       - `.settings-section-title` - Section headers
       - `.settings-input` - Text inputs with blue-dominant border
       - `.settings-select` - Dropdown selects
       - `.settings-checkbox` - Checkbox with gold accent
       - `.settings-button` - Action buttons
       - `.settings-button.primary` - Primary button variant
       - `.diamond-dismiss` - Diamond-shaped dismiss button (rotate 45deg)

    2. IMPORTANT: Remove or set to no-op any breathing animations (use emergence instead)

    Reference exact colors from 08-RESEARCH.md:
    - --gold-metallic: #D4AF37
    - --blue-dominant: #1fbdea
    - --purple-combat: #9D4EDD
    - --bg-primary: #0A0A0B
    - --bg-elevated: #121214
  </action>
  <verify>
    grep -q "settings-tab" IP/styles/orchestr8.css && \
    grep -q "\.diamond-dismiss" IP/styles/orchestr8.css
  </verify>
  <done>
    orchestr8.css contains settings-specific classes matching Void Design tokens
  </done>
</task>

<task type="auto">
  <name>Refactor 07_settings.py to use orchestr8.css classes</name>
  <files>IP/plugins/07_settings.py</files>
  <action>
    Refactor 07_settings.py to use Void Design System:

    1. Remove inline SETTINGS_CSS constant entirely

    2. Import and inject orchestr8.css via the standard pattern used in 06_maestro.py:
       - Use load_orchestr8_css() from IP.styles.font_profiles or inline inject

    3. Replace inline CSS class references with orchestr8.css classes:
       - Remove @keyframes waves animation (NOT Void Design - breathing forbidden)
       - Use `animation: emergence` for any motion (from orchestr8.css)

    4. Fix button callback patterns:
       - Replace `on_change` with `on_click` for all mo.ui.button calls
       - This fixes the "dead button" issue per CLAUDE.md troubleshooting

    5. Add diamond dismiss button styling:
       - Use rotated square (transform: rotate(45deg)) for close buttons
       - NEVER use ✕ character

    6. Ensure three-state color system:
       - Gold (#D4AF37) for working/active
       - Teal (#1fbdea) for default/broken
       - Purple (#9D4EDD) for combat/active agents
       - NO red for errors
  </action>
  <verify>
    cd /home/bozertron/Orchestr8_jr && \
    python -c "
import ast
with open('IP/plugins/07_settings.py') as f:
    tree = ast.parse(f.read())
    # Check no on_change on buttons
    for node in ast.walk(tree):
        if isinstance(node, ast.keyword):
            if hasattr(node, 'attr') and node.attr == 'on_change':
                # Should not exist on button callbacks
                pass
    print('Parse OK')
" && ! grep -q "on_change.*button" IP/plugins/07_settings.py
  </verify>
  <done>
    07_settings.py uses orchestr8.css classes, no inline CSS, on_click instead of on_change
  </done>
</task>

</tasks>

<verification>
1. Run `marimo run orchestr8.py` - Settings tab loads without errors
2. Verify Settings UI colors match Void Design tokens (gold, teal, purple)
3. Verify no breathing/waves animations - use emergence only
4. Verify no ✕ characters - use ◇ diamond instead
5. Settings save persists to TOML file correctly
</verification>

<success_criteria>
- Settings UI renders with Void Design exact colors
- All buttons respond to clicks (on_click pattern)
- No breathing animations in settings UI
- Diamond dismiss pattern implemented
- Three-state color system enforced
</success_criteria>

<output>
After completion, create `.planning/phases/08-design-ui-system/08-01-SUMMARY.md`
</output>
